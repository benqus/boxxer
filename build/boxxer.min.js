!function(){function Surrogate(){}function debugMode(){return global.boxxer_debug===!0}function removeElement(a){var b=a.parentNode;b&&b.removeChild(a)}function getEventTarget(a){return a.target||a.srcElement}function getBody(){return document.body}function init(a){(a||getBody()).appendChild(renderer)}function getRenderer(){return renderer}function inherit(subClass,superClass){var TemporarySuperClass=function(){};debugMode()&&eval("TemporarySuperClass = function "+subClass.name+"() {};"),TemporarySuperClass.prototype=superClass.prototype,subClass.prototype=new TemporarySuperClass,subClass.prototype.constructor=subClass}function mix(a,b){var c;for(c in b.prototype)b.prototype.hasOwnProperty(c)&&(a.prototype[c]=b.prototype[c])}function Async(){}function Connection(a,b){this._url=a,this._data=b.data||"",this._callback=b.callback,this._request=new XMLHttpRequest}function Component(){}function LifeCycle(){}function Decorator(){}function BoxEvent(a,b,c){this._eventType=a,this._callback=b,this._context=c,this._muted=!1,this._id="event_"+BoxEvent._id++}function EventEmitter(){this._eventTypes={},this._mutedTypes={}}function Layout(){}function Manager(){}function Adjustable(){}function BoxComponent(a){this.component=a}function ElementWrapper(){this._element=document.createElement("div")}function ParentElementWrapper(a){this._parentElement=a}function Serializer(){}function Data(){this.url="/persist"}function BoxRenderer(){}function Dimension(a){var b=this._parse(a),c=parseInt(b.value);switch(this._minValue=Box.MIN_DIMENSION,this._value=c?c:1,this._type=void 0,b.type){case"%":this._type=Dimension.PERCENT;break;case"px":this._type=Dimension.PIXEL;break;default:this._type=Dimension.WEIGHT}}function ViewContainer(a){this.box=new Box(1,1,a)}function Dialog(a,b,c,d){ElementWrapper.call(this),Adjustable.call(this);var e=this.getElement();e.setAttribute("class","boxxer-Dialog"),e.style.position="absolute",renderer.appendChild(e),renderer.removeChild(e),this.container=void 0,this.width=new Dimension(a),this.height=new Dimension(b),this.left=c||Dialog.CENTER,this.right=d||Dialog.CENTER,this.viewContainer=new ViewContainer(e)}function Box(a,b,c){return ElementWrapper.call(this),ParentElementWrapper.call(this,c),EventEmitter.call(this),BoxComponent.call(this),this._id=Box.generateUniqueBoxId(),this._name=null,this._children={},this.view=void 0,this.width=new Dimension(a),this.height=new Dimension(b),this._decorators=[],this._flowDirection=Box.FLOW_VERTICAL,this.isRendered=!1,this.addClass("boxxer-Box"),this.setDataAttribute("box-id",this.getId()),Box._registry[this.getId()]=this,this}var global=this,exports={},api=Object.create(exports),_boxxer=global.boxxer,renderer=document.createElement("div");renderer.style.display="none",_boxxer&&(exports._boxxer=_boxxer),global.boxxer=api,exports.Surrogate=Surrogate,exports.mix=mix,exports.inherit=inherit,exports.debugMode=debugMode,exports.utils={getBody:getBody,getRenderer:getRenderer,getEventTarget:getEventTarget,removeElement:removeElement},exports.init=init,exports.Async=Async,Async.prototype.save=function(a,b,c,d){return Async.saveBox(this,a,d,b,c)},Async.saveBox=function(a,b,c,d,e){e||(e=Serializer.JSON),new Connection(a,b,c,e,d).save()},Async.POST="PUT",Async.POST="DELETE",Async.POST="POST",Async.GET="GET",exports.Connection=Connection,Connection.prototype.onStateChange=function(){var a,b=this._request;"function"==typeof this._callback&&4===b.readyState&&200===b.status&&(a=Array.prototype.slice(arguments),a.unshift(b,b.responseText),this._callback.apply(null,a))},Connection.prototype.save=function(){this._request.onreadystatechange=this.onStateChange.bind(this),this._request.open(Connection.POST,this._url,!0),this._request.send(this._data)},Connection.prototype.create=function(){this._request.onreadystatechange=this.onStateChange.bind(this),this._request.open(Connection.PUT,this._url,!0),this._request.send(this._data)},Connection.prototype.remove=function(){this._request.onreadystatechange=this.onStateChange.bind(this),this._request.open(Connection.DELETE,this._url,!0),this._request.send()},Connection.prototype.get=function(){this._request.onreadystatechange=this.onStateChange.bind(this),this._request.open(Connection.GET,this._url,!0),this._request.send()},Connection.PUT="PUT",Connection.DELETE="DELETE",Connection.POST="POST",Connection.GET="GET",exports.Component=Component,Component.prototype.getContainer=function(){return this.container},Component.prototype.setContainer=function(a){this.container=a},Component.prototype.setFrame=Component.prototype.setContainer,Component.prototype.getUniqueComponentId=function(){throw new Error("Component.getUniqueComponentId() has not been implemented.")},Component.prototype.getElement=function(){throw new Error("Component.getElement() has not been implemented.")},Component.prototype.getSerializedState=function(){throw new Error("Component.getSerializedState() has not been implemented.")},Component.prototype.getPermissionKey=function(){},exports.LifeCycle=LifeCycle,LifeCycle.prototype.onOpen=function(){},LifeCycle.prototype.onClose=function(){},LifeCycle.prototype.onShow=function(){},LifeCycle.prototype.onHide=function(){},LifeCycle.prototype.onMinimize=function(){},LifeCycle.prototype.onMaximize=function(){},LifeCycle.prototype.onRestore=function(){},LifeCycle.prototype.onResize=function(){},LifeCycle.prototype.onActivate=function(){},LifeCycle.prototype.onDeactivate=function(){},LifeCycle.prototype.onFlowChange=function(){},exports.Decorator=Decorator,Decorator.prototype.engage=function(){return this},Decorator.prototype.getTemplate=function(){return document.createElement("div")},Decorator.registry={},Decorator.isRegistered=function(a){return Decorator.registry.hasOwnProperty(a)},Decorator.getDecorator=function(a){return Decorator.registry[a]},Decorator.extend=function(a){var b,c=new Decorator;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return"function"==typeof c.init&&c.init(),c},Decorator.register=function(a,b){var c,d=Decorator.registry;return""===a||d.hasOwnProperty(a)||(c=Decorator.extend(b),d[a]=c),c},exports.createDecorator=Decorator.register,exports.BoxEvent=BoxEvent,BoxEvent.prototype.execute=function(){if(!this.isMuted()){var a=Array.prototype.slice.call(arguments);a.unshift(this.getEventType()),this._callback.apply(this._context,a)}},BoxEvent.prototype.getId=function(){return this._id},BoxEvent.prototype.getEventType=function(){return this._eventType},BoxEvent.prototype.mute=function(){this._muted=!0},BoxEvent.prototype.unmute=function(){this._muted=!1},BoxEvent.prototype.isMuted=function(){return this._muted},BoxEvent._id=0,exports.EventEmitter=EventEmitter,EventEmitter.prototype._createEventType=function(a){return this._eventTypes.hasOwnProperty(a)||(this._eventTypes[a]={}),this._eventTypes[a]},EventEmitter.prototype.on=function(a,b,c){var d=new BoxEvent(a,b,c||this);return this._createEventType(a)[d.getId()]=d,d},EventEmitter.prototype.off=function(a){if(!(a instanceof BoxEvent))throw new TypeError("Cannot un-register a non-Event type object...");delete this._eventTypes[a.getEventType()][a.getId()]},EventEmitter.prototype.mute=function(a){this._mutedTypes[a]=!0},EventEmitter.prototype.unmute=function(a){delete this._mutedTypes[a]},EventEmitter.prototype.isMuted=function(a){return this._mutedTypes.hasOwnProperty(a)},EventEmitter.prototype.emit=function(){var a,b,c=Array.prototype.slice.call(arguments),d=c.shift(),e=this._eventTypes[d];if(!this.isMuted(d))for(b in e)e.hasOwnProperty(b)&&(a=e[b],a.execute.apply(a,c))},EventEmitter.ON_RENDER="render",EventEmitter.ON_UPDATE="update",EventEmitter.ON_SHOW="show",EventEmitter.ON_HIDE="hide",EventEmitter.ON_RESIZE="resize",EventEmitter.ON_FLOW="flow",EventEmitter.ON_FOCUS="focus",EventEmitter.ON_FOCUS="blur",EventEmitter.ON_RESTORE="restore",EventEmitter.ON_MINIMIZE="minimize",EventEmitter.ON_MAXIMIZE="maximize",exports.Layout=Layout,Layout.prototype.getLayoutPath=function(){return this.getName()||this.getId()},Layout.prototype.getLayout=function(){var a=function(a){var b=JSON.parse(a.responseText),c=b.layout,d=Serializer.deserialize(c);this.addBox(d)}.bind(this);new Connection(Layout.URL+"/"+this.getLayoutPath(),{callback:a}).get()},Layout.prototype.saveLayout=function(a){var b=this.serialize(Serializer.JSON,a||null);new Connection(Layout.URL+"/"+this.getLayoutPath(),{data:b}).save()},Layout.prototype.deleteLayout=function(){new Connection(Layout.URL+this.getLayoutPath()).remove()},Layout.URL=window.location.href+"/layout",exports.Manager=Manager,exports.Adjustable=Adjustable,Adjustable.prototype.getWidth=function(){return this.width},Adjustable.prototype.getHeight=function(){return this.height},Adjustable.prototype.setWidth=function(a){this._setElementWidth(parseInt(a))},Adjustable.prototype.setHeight=function(a){this._setElementHeight(parseInt(a))},Adjustable.prototype.setDimensions=function(a,b){this.setWidth(a),this.setHeight(b)},exports.BoxComponent=BoxComponent,BoxComponent.prototype.setComponent=function(a){return a&&(this.component=a),this},BoxComponent.prototype.getComponent=function(){return this.component},BoxComponent.render=function(a){return BoxComponent.invoke(a.isRendered?"onResize":"onOpen",a)},BoxComponent.invoke=function(a,b){var c=b.getComponent();return c&&c[a]&&c[a].apply(c,[b]),b},BoxComponent.destroy=function(a){return BoxComponent.invoke("onClose",a)},BoxComponent.flowChange=function(a){return BoxComponent.invoke("onFlowChange",a)},BoxComponent.maximize=function(a){return BoxComponent.invoke("onMaximize",a)},BoxComponent.minimize=function(a){return BoxComponent.invoke("onMinimize",a)},BoxComponent.restore=function(a){return BoxComponent.invoke("onRestore",a)},BoxComponent.show=function(a){return BoxComponent.invoke("onShow",a)},BoxComponent.hide=function(a){return BoxComponent.invoke("onHide",a)},exports.ElementWrapper=ElementWrapper,ElementWrapper.prototype._setElementWidth=function(a){return this.getElement().style.width=a+"px",this},ElementWrapper.prototype._setElementHeight=function(a){return this.getElement().style.height=a+"px",this},ElementWrapper.prototype.setElementDimension=function(a,b){return this._setElementWidth(a),this._setElementHeight(b),this},ElementWrapper.prototype.getElement=function(){return this._element},ElementWrapper.prototype.addClass=function(a){var b=this.getElement().getAttribute("class"),c=b?b.split(" "):[];return c.indexOf(a)<0&&(c.push(a),this.getElement().setAttribute("class",c.join(" "))),this},ElementWrapper.prototype.hasClass=function(a){return this.getElement().getAttribute("class").indexOf(a)>-1},ElementWrapper.prototype.getAttribute=function(a){return this.getElement().getAttribute(a)||""},ElementWrapper.prototype.setAttribute=function(a,b){return b&&this.getElement().setAttribute(a,b.toString()),this},ElementWrapper.prototype.getDataAttribute=function(a){return this.getElement().getAttribute("data-"+a)},ElementWrapper.prototype.setDataAttribute=function(a,b){return b&&this.getElement().setAttribute("data-"+a,b),this},ElementWrapper.prototype.text=function(a){var b=this.getElement();return"string"!=typeof a?b.innerText:(b.innerText=a,this)},ElementWrapper.prototype.html=function(a){var b=this.getElement();return"string"!=typeof a?b.innerHTML:(b.innerHTML=a,this)},ElementWrapper.prototype.hide=function(){return this.getElement().style.display="none",BoxComponent.hide(this),this.emit(EventEmitter.ON_HIDE),this},ElementWrapper.prototype.show=function(){return this.getElement().style.display="",BoxComponent.show(this),this.emit(EventEmitter.ON_SHOW),this},ElementWrapper.prototype.toggle=function(){return"none"===this.getElement().style.display?this.show():this.hide()},ElementWrapper.prototype.maximize=function(){var a=this.getElement();return a.style.position="absolute",a.style.left="0",a.style.top="0",this.setElementDimension(document.width,document.height),BoxComponent.maximize(this),this},ElementWrapper.prototype.minimize=function(){return this.setElementDimension(this.width.getMinimumValue(),this.height.getMinimumValue()),BoxComponent.minimize(this),this},ElementWrapper.prototype.restore=function(){var a=this.getElement();return a.style.position="relative",a.style.left="auto",a.style.top="auto",this.setElementDimension(this.width.getValue(),this.height.getValue()),BoxComponent.restore(this),this},exports.ParentElementWrapper=ParentElementWrapper,ParentElementWrapper.prototype.getParentElement=function(){return this._parentElement||getBody()},ParentElementWrapper.prototype.setParentElement=function(a){var b=this.getElement();return b.parentElement!==a&&this._parentElement!==a&&(this._parentElement=a,this._parentElement.appendChild(b)),this},exports.Serializer=Serializer,Serializer.prototype.serialize=function(a,b){var c;return c=a===Serializer.JSON?Serializer.toJSON(this,b):Serializer.toXML(this,b)},Serializer.toJSON=function(a,b){var c,d,e=a.view,f=a.getChildCount(),g=a.getDecorators(),h='{"id":'+Number(a.getId().replace("bbox_",""))+","+'"flow":"'+a.getFlowDirection()+'",'+Serializer.getJSONAttributes(a);if(b=b||a.getName()||null,"string"==typeof b&&""!==b&&(h+=',"name":"'+b+'"'),g.length>0&&(h+=',"decorators":[',h+=g.join(","),h+="]"),f>0){h+=',"children":[',d=a.getChildren();for(c in d)d.hasOwnProperty(c)&&(h+=d[c].serialize(Serializer.JSON,c),f--,f>0&&(h+=","));h+="]"}return e instanceof ViewContainer&&(h+=", view:"+e.serialize()),h+="}"},Serializer.toXML=function(a,b){var c,d,e=a.getDecorators(),f="<bbox id='"+Number(a.getId().replace("bbox_",""))+"'"+" flow='"+a.getFlowDirection()+"'";if("string"==typeof b&&""!==b&&(f+=" name='"+b+"'"),f+=Serializer.getXMLAttributes(a)+">",e.length>0&&(f+=" decorators='",f+=e.join(","),f+="'"),a.getChildCount()){d=a.getChildren();for(c in d)d.hasOwnProperty(c)&&(f+=d[c].serialize(Serializer.XML,c))}return f+="</bbox>"},Serializer.getJSONAttributes=function(a){return'"width":'+a.getWidth().getSerializedValue()+","+'"height":'+a.getHeight().getSerializedValue()},Serializer.getXMLAttributes=function(a){return" width='"+a.getWidth().getSerializedValue()+"' "+"height='"+a.getHeight().getSerializedValue()+"'"},Serializer.deserialize=function(a){var b,c,d,e,f;try{d=JSON.parse(a),d instanceof Object&&(f=Serializer.JSON,e=d)}catch(g){b=document.createElement("div"),b.innerHTML=a,c=b.firstElementChild||b.children[0],c&&"bbox"===c.tagName.toLowerCase()&&(f=Serializer.XML,e=c)}return void 0!==e&&(e=Serializer.buildHierarchy(e,f)),e},Serializer.buildHierarchy=function(a,b){var c,d,e,f,g=new Box;if(b===Serializer.JSON){if(g=new Box,g.setFlowDirection(a.flow),g.setWidth(a.width),g.setHeight(a.height),g.addClass(a.class),a.decorators)for(d=a.decorator.replace(" ","").split(",");d.length>0;)g.addDecorator(d.shift());if(a.children&&a.children.length>0)for(f=0;f<a.children.length;f++)e=a.children[f],c=g.addBox(Serializer.buildHierarchy(e,b),e.name)}else if(b===Serializer.XML){if(g.setFlowDirection(a.getAttribute("flow")),g.setWidthDimension(a.getAttribute("width")),g.setHeightDimension(a.getAttribute("height")),g.addClass(a.getAttribute("class")),a.getAttribute("decorators"))for(d=a.getAttribute("decorators").replace(" ","").split(",");d.length>0;)g.addDecorator(d.shift());if(a.children&&a.children.length)for(f=0;f<a.children.length;f++)e=a.children[f],c=g.addBox(Serializer.buildHierarchy(e,b),e.getAttribute("name"))}return g},Serializer.XML="xml",Serializer.JSON="json",exports.Data=Data,exports.BoxRenderer=BoxRenderer,BoxRenderer.setElementInline=function(a){a.style.display="inline-block",a.style.verticalAlign="top"},BoxRenderer.render=function(a,b,c){if(!(a instanceof Box))throw new TypeError("Invalid argument - not a box!");var d=a.getElement(),e=a.view;"undefined"==typeof c||"undefined"==typeof b?(b=a.getParentElement(),c=a.getFlowDirection(),c===Box.FLOW_HORIZONTAL&&BoxRenderer.setElementInline(d),a.setDimensions(b.offsetWidth,b.offsetHeight)):c===Box.FLOW_HORIZONTAL&&BoxRenderer.setElementInline(d),d.parentNode!==b&&(d.parentNode&&d.parentNode.removeChild(d),b.appendChild(d)),a.isRendered||BoxRenderer._applyDecorators(a),BoxRenderer._postRender(a,e,d)},BoxRenderer._applyDecorators=function(a){for(var b,c,d=a.getDecorators(),e=d.length,f=0;e>f;f++)b=Decorator.getDecorator(d[f]),c=b.getTemplate(a),b.engage(a,c)},BoxRenderer._postRender=function(a,b,c){var d,e;a.getChildCount()&&this._renderChildren(a,c,a.getFlowDirection()),b instanceof ViewContainer&&(d=b.render(c),d&&(d instanceof Node?c.appendChild(d):"string"==typeof d&&(e=document.createElement("div"),e.innerHTML=d,c.appendChild(e.firstElementChild))))},BoxRenderer.resolveAndSortChildren=function(a,b,c){var d,e,f,g=[],h=c===Box.FLOW_HORIZONTAL,i=h?"width":"height",j=b["offset"+(h?"Width":"Height")],k=a.getChildren(),l={},m={},n={},o=0,p=0,q=0;for(f in k)if(k.hasOwnProperty(f)){switch(e=k[f],d=e[i],d.getType()){case Dimension.PERCENT:m[f]=e,o+=Math.floor(j*(d.getValue()/100));break;case Dimension.PIXEL:l[f]=e,p+=d.getValue();break;default:n[f]=e,q+=d.getValue()}g.push(f)}return{order:g,method:c===Box.FLOW_VERTICAL?"Width":"Height",dimension:c===Box.FLOW_HORIZONTAL?"Width":"Height",pixelBoxes:l,percentBoxes:m,weightBoxes:n,percents:o,weights:q,pixels:p}},BoxRenderer._renderChildren=function(a,b,c){var d,e,f,g,h,i,j,k,l,m=this.resolveAndSortChildren(a,b,c),n=a.getChildren(),o=m.order,p=Dimension.WEIGHT;for(c===Box.FLOW_HORIZONTAL?(d=b.offsetHeight,e=b.offsetWidth):(d=b.offsetWidth,e=b.offsetHeight),g=e-m.percents-m.pixels;o.length>0;)l=n[o.shift()],h=l.width,i=l.height,c===Box.FLOW_HORIZONTAL?(f=h.getType(),j=h.calculate(f===p?g:e,m.weights),k=i.calculate(d,1)):(f=i.getType(),j=h.calculate(d,1),k=i.calculate(f===p?g:e,m.weights)),l.setDimensions(j,k),l.render()},exports.Dimension=Dimension,Dimension.prototype._parse=function(a){var b=(a||"").toString().split(/(\%|px)/);return{value:b[0],type:b[1]}},Dimension.prototype.getType=function(){return this._type||""},Dimension.prototype.getMinimumValue=function(){return this._minValue},Dimension.prototype.getValue=function(){return this._value},Dimension.prototype.calculate=function(a,b){var c=this.getType(),d=this.getValue(),e=5,f=parseInt(this._parse(this.getMinimumValue()).value),g=d;if(e>=a&&c===Dimension.WEIGHT)g=0;else{switch(c){case Dimension.PERCENT:g=a*(d/100);break;case Dimension.WEIGHT:d>b&&(d=b),g=a/b*d}f>g&&(g=f)}return Math.floor(g)},Dimension.prototype.getSerializedValue=function(){var a=this.getType(),b=this.getValue();return a!==Dimension.WEIGHT&&(b+=this.getType()),b},Dimension.PERCENT="%",Dimension.WEIGHT="weight",Dimension.DEFAULT_WEIGHT=1,Dimension.PIXEL="px",exports.ViewContainer=ViewContainer,ViewContainer.prototype.getBox=function(){return this.box},ViewContainer.prototype.render=function(){return this.box.render().getElement()},ViewContainer.prototype.destroy=function(){return this.box.destroy()},ViewContainer.prototype.serialize=function(){return'""'},boxxer.createDecorator("HeaderDecorator",{engage:function(a,b){var c=a.getElement();c.style.position="relative",c.appendChild(b),console.log(c)},getTemplate:function(a){var b=(document.createElement("h5"),document.createElement("header"));return b.setAttribute("class","HeaderDecorator"),b.innerHTML=a.getId(),b.style.position="absolute",b.style.left="0px",b.style.top="0px",b}}),boxxer.createDecorator("MaximizeDecorator",{engage:function(a,b){var c=a.getElement();c.style.position="relative",c.appendChild(b)},getTemplate:function(a){var b=document.createElement("button");return b.innerHTML="+",b.style.position="absolute",b.style.right="10px",b.style.top="10px",b.onclick=function(a){return function(){"+"===b.innerHTML?(a.maximize(),b.innerHTML="~"):(a.restore(),b.innerHTML="+")}}(a),b}}),exports.Dialog=Dialog,mix(Dialog,ElementWrapper),mix(Dialog,Adjustable),Dialog.prototype.open=function(){var a=this.getElement(),b=this.container||getBody(),c=b.offsetWidth,d=b.offsetHeight,e=this.width.calculate(c,1),f=this.height.calculate(d,1);return this.setWidth(e),this.setHeight(f),a.style.left=c/2-e/2+"px",a.style.top=d/2-f/2+"px",this.renderViewContent(a),b.appendChild(a),this},Dialog.prototype.setContainer=function(a){if(!(a instanceof Box||a instanceof HTMLElement))throw new TypeError("Container must be a Box or a HTMLElement instance!");return this.container=a,this},Dialog.prototype.renderViewContent=function(a){var b,c=this.viewContainer.render();c&&(c instanceof Node?a.appendChild(c):"string"==typeof c&&(b=document.createElement("div"),b.innerHTML=c,a.appendChild(b.firstElementChild)))},Dialog.prototype.close=function(){this.viewContainer.destroy(),removeElement(this.getElement())},Dialog.CENTER="center",exports.Box=Box,mix(Box,Adjustable),mix(Box,ElementWrapper),mix(Box,ParentElementWrapper),mix(Box,Layout),mix(Box,Serializer),mix(Box,EventEmitter),mix(Box,BoxComponent),Box.prototype.addDecorator=function(a){return this._decorators.push(a),this},Box.prototype.getDecorators=function(){return this._decorators},Box.prototype.getFlowDirection=function(){return this._flowDirection},Box.prototype.setFlowDirection=function(a){return this._flowDirection=a||Box.FLOW_VERTICAL,BoxComponent.flowChange(this),this},Box.prototype.setWidthDimension=function(a){return this.width=new Dimension(a),this},Box.prototype.setHeightDimension=function(a){return this.height=new Dimension(a),this},Box.prototype.addChild=function(a,b,c){var d=new Box(a,b,this.getElement());return this.addBox(d,c),this},Box.prototype.addBox=function(a,b){if(!(a instanceof Box))throw new TypeError("Argument is not a Box!");return a.setParentElement(this.getElement()),b&&this.setName(b),this.getChildren()[a.getName()||a.getId()]=a,this},Box.prototype.getName=function(){return this._name},Box.prototype.setName=function(a){if(Box._nameRegistry[a])throw"Box name already exists: "+a;return this._name=a,Box._nameRegistry[a]=this.getId(),this},Box.prototype.getId=function(){return this._id},Box.prototype.getChild=function(a){return this.getChildren()[a]},Box.prototype.getChildren=function(){return this._children},Box.prototype.getChildCount=function(){return Object.keys(this.getChildren()).length},Box.prototype.removeChild=function(a){var b=this.getChildren();return b[a].close(),delete b[a],this},Box.prototype.render=function(){var a,b=this.getParentElement(),c=b.getAttribute("data-box-id"),d=Box.getById(c),e=EventEmitter.ON_RENDER;return d instanceof Box&&(a=d.getFlowDirection()),BoxRenderer.render(this,b,a),BoxComponent.render(this),this.isRendered?e=EventEmitter.ON_UPDATE:this.isRendered=!0,this.emit(e),this},Box.prototype.destroy=function(){delete Box._nameRegistry[this.getName()],delete Box._registry[this.getId()],BoxComponent.destroy(this),removeElement(this.getElement())},Box.MIN_DIMENSION="10px",Box.FLOW_VERTICAL="vertical",Box.FLOW_HORIZONTAL="horizontal",Box._registry={},Box._nameRegistry={},Box.REG_PREFIX="bbox_",Box._id=0,Box.generateUniqueBoxId=function(){return Box.REG_PREFIX+Box._id++},Box.removeBox=function(a){delete Box._registry[a]},Box.getById=function(a){return Box._registry[a]},Box.getByName=function(a){var b=Box._nameRegistry[a];return b?Box._registry[b]:null},Box.clean=function(){Box._id=0,Box._registry={}},api.createBox=function(a){return a=a||{},new Box(a.width,a.height,a.parent||a.container).setFlowDirection(a.flow).setComponent(a.component)},api.createDialog=function(a){return a=a||{},new Dialog(a.width,a.height,a.left,a.right)}}.call(this);